<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 강의</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='time_table.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='professor.css') }}">
    <link rel="stylesheet" as="style" crossorigin
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
</head>
<body>
<div class="sidebar">
    <h2 class="sidebar-title">메뉴</h2>
    <ul id="menuList" class="menu-list"></ul>
</div>

<div class="content-area">
    <header class="full-title-header">
        <h1 class="page-title">오늘의 강의</h1>
    </header>
    <main class="main-content">
        {% if error %}
            <p class="error">{{ error }}</p>
        {% endif %}
        <div class="class-list">
            {% if classes %}
                {% for class in classes %}
                <div class="class-card">
                    <div class="class-details">
                        <h3>{{ class.subject_name }}</h3>
                        <div class="class-info">
                            <span>시간: {{ class.start_time }} ~ {{ class.end_time }}</span>
                            <span>강의실: {{ class.location }}</span>
                        </div>
                    </div>
                    <div class="class-actions">
                        <a href="#" class="btn-manage">출석 관리</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="empty-message">오늘 예정된 강의가 없습니다.</p>
            {% endif %}
        </div>
    </main>
</div>

<script>
    const userRole = "{{ role }}";
    const menuList = document.getElementById("menuList");
    let menuItems = [];

    if (userRole === "professor") {
        menuItems = [
            { name: "오늘의 강의", url: "#", current: true },
            { name: "시간표", url: "{{ url_for('timetable.timetable') }}" },
            { name: "휴강 등록", url: "#" },
            { name: "로그아웃", url: "{{ url_for('auth.logout') }}" }
        ];
    }
    // 기존 구조 유지 + "오늘의 강의" 클릭 시 alert 추가
    menuItems.forEach(item => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="${item.url}">${item.name}</a>`;
        menuList.appendChild(li);

    // "오늘의 강의" 항목 클릭 시 알림 추가
    if (item.name === "오늘의 강의") {
        const link = li.querySelector("a");
        link.addEventListener("click", (e) => {
             e.preventDefault();
             alert("이미 오늘의 강의입니다.");
        });
        // 현재 메뉴 강조 스타일
        link.style.color = "#2563eb";
        link.style.fontWeight = "700";
        }
    });
</script>
</body>
</html>