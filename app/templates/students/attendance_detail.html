{% extends "base.html" %}

{% block title %}{{ subject_name }} ì¶œì„ ìƒì„¸ - WCheck{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='attendance.css') }}">
{% endblock %}

{% block header %}
    <header class="full-title-header">
        <div class="title-wrap">
            <h1 class="page-title">{{ subject_name }} ì¶œì„ ìƒì„¸</h1>
        </div>
    </header>
{% endblock %}

{% block content %}
        <div class="attendance-container">
            <div class="hint alert alert-info" style="margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);">
                <span>ğŸ“Š</span>
                <span>ê³¼ëª©ì˜ ì£¼ì°¨ë³„ ì¶œì„ í˜„í™©ì…ë‹ˆë‹¤.</span>
            </div>

            <table class="att-table table fade-in">
                <thead>
                <tr>
                    <th style="width:10%;">ì£¼ì°¨</th>
                    <th style="width:20%;">ë‚ ì§œ</th>
                    <th style="width:12%;">ìš”ì¼</th>
                    <th style="width:23%;">ì‹œê°„</th>
                    <th style="width:35%;">ì¶œì„ ì—¬ë¶€</th>
                </tr>
                </thead>
                <tbody>
                {% if attendance_records %}
                    {% for record in attendance_records %}
                        <tr class="att-row" style="transition: background-color var(--transition-fast);">
                            <td style="font-weight: 600; color: var(--text-primary);">{{ record.week }}ì£¼ì°¨</td>
                            <td style="font-family: 'Courier New', monospace;">{{ record.class_date }}</td>
                            <td>{{ record.day_of_week }}</td>
                            <td style="font-size: 13px; color: var(--text-secondary);">{{ record.start_time }} ~ {{ record.end_time }}</td>
                            <td>
                                <span class="badge {% if record.status_class == 'present' %}badge-success{% elif record.status_class == 'late' %}badge-warning{% elif record.status_class == 'absent' %}badge-danger{% elif record.status_class == 'cancelled' %}badge-info{% elif record.status_class == 'none' %}badge-neutral{% else %}badge-neutral{% endif %}">
                                    {{ record.status }}
                                </span>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5">
                            <div class="empty-state-attendance">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.3; margin-bottom: var(--spacing-md);">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                                <p class="empty-message-attendance">í•´ë‹¹ ê³¼ëª©ì˜ ì¶œì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            </div>
                        </td>
                    </tr>
                {% endif %}
                </tbody>
            </table>
            <div class="back-button-container">
                <button class="btn btn-secondary" onclick="history.back()">
                    <svg class="icon-inline" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    ë’¤ë¡œ ê°€ê¸°
                </button>
            </div>
        </div>
{% endblock %}
